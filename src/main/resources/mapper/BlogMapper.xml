<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hqyj.zsj.mapper.BlogMapper">
    <!-- 映射Article结果集-->
<resultMap id="BlogMap" type="blog">
    <id column="blog_id" property="blogId"/>
    <result column="blog_title" property="blogTitle"/>
    <result column="blog_time" property="blogTime"/>
    <result column="blog_content" property="blogContent"/>
    <result column="blog_type" property="blogType"/>
    <result column="blog_state" property="blogState"/>
    <association property="user">
        <id property="userId" column="user_id"/>
        <result property="userName" column="username"/>
    </association>

</resultMap>
    <select id="blogList" resultMap="BlogMap">
         SELECT
            b.`blog_id`,
            b.`blog_title`,
            b.`blog_time`,
            b.`blog_content`,
            b.`blog_type`,
            b.`blog_state`,
            u.`user_id`,
            u.`username`

        FROM
            `blog` b
            LEFT JOIN `user` u ON b.`blog_author` = u.`user_id`
        WHERE
        b.`blog_state`=#{blogState}
        <if test="blogTitle!=null and blogTitle!=''">
            and b.`blogTitle` like concat('%',#{blogTitle},'%')
        </if>

    </select>
</mapper>